(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{406:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Q}});var n=r(9008),a=r.n(n),o=r(4603),i=r.n(o),u=r(1163),s=function(e,t){var r;return function(){for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return r&&clearTimeout(r),new Promise(function(n){r=setTimeout(function(){return n(e.apply(void 0,a))},t)})}};function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(){var e=null,t=(0,u.useRouter)(),r=t.query.q||"",n=localStorage.getItem("termType")||"Name",a=function(e){e.preventDefault()},o=function(r){r.preventDefault();var n=r.target,a=function(){var e=n.value;t.push({query:c(c({},t.query),{},{q:e})})};e||(e=s(a,450)),e()},i=function(e){localStorage.setItem("termType",e),t.push({query:c(c({},t.query),{},{termType:e})})},l=["Name","Species"].filter(function(e){return e!==n});return{onSearchSubmit:a,onChooseTermType:i,onSearchTerm:o,currentSearchedValue:r,currentTermTypeValue:n,menuOptions:l}},m=r(3678),d=r.n(m),h=r(7294),g=r(4184),v=r.n(g),y=r(9503),$=r.n(y);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,u=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(s){u=!0,n=s}finally{try{i||null==a.return||a.return()}finally{if(u)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var w=function(){var e=b((0,h.useState)(!1),2),t=e[0],r=e[1],n=b((0,h.useState)(!1),2),a=n[0],o=n[1],i=(0,h.useRef)(null);return(0,h.useEffect)(function(){function e(e){i.current&&!i.current.contains(e.target)&&r(!1)}return o(!0),document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}},[i]),{ref:i,onMenuOpen:function(){return r(!t)},showMenu:t,showComponent:a}},_=function(e){var t,r,n,a=e.selectedOption,o=e.children,i=e.customClass,u=w(),s=u.ref,l=u.onMenuOpen,c=u.showMenu,f=u.showComponent;return h.createElement(h.Fragment,null,f&&h.createElement(h.Fragment,null,h.createElement("div",{ref:s,className:v()($().button,i),onClick:l},a,h.createElement(function(){return h.createElement("svg",{width:"8",height:"5",viewBox:"0 0 12 6",xmlns:"http://www.w3.org/2000/svg"},h.createElement("path",{d:"M6 6L0 0H12L6 6Z",fill:"#AAAAAA"}))},null)),h.createElement("div",{className:v()($().menuOptions,(t={},r=$().showMenu,n=c,r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t))},o)))},P=function(){var e=p(),t=e.onSearchSubmit,r=e.onChooseTermType,n=e.onSearchTerm,a=e.currentSearchedValue,o=e.currentTermTypeValue,i=e.menuOptions;return h.createElement("div",{className:d().searchBar},h.createElement("div",{className:d().termType},h.createElement(_,{selectedOption:"Filter by ".concat(o),customClass:v()(d().selectedOption)},i.map(function(e){return h.createElement("div",{className:d().typeOption,key:e,onClick:function(){return r(e)},"data-testid":"select-option-".concat(e)},e)}))),h.createElement("form",{onSubmit:function(e){return t(e)}},h.createElement("input",{onChange:function(e){return n(e)},id:"search",type:"text",name:"search",autoComplete:"off",placeholder:"Search...",defaultValue:a})))},S=r(5152),H=r.n(S),C=r(9669),O=r.n(C)().create({baseURL:"http://localhost:3000",timeout:15e3});function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach(function(t){k(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,u=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(s){u=!0,n=s}finally{try{i||null==a.return||a.return()}finally{if(u)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var A=function(){var e=T((0,h.useState)({data:[],totalCount:[]}),2),t=e[0],n=e[1],a=T((0,h.useState)(!1),2),o=a[0],i=a[1],s=T((0,h.useState)(!1),2),l=s[0],c=s[1],f=(0,u.useRouter)(),p=f.query,m=p.termType,d=void 0===m?"name":m,g=p.sort,v=void 0===g?"asc":g,y=p.sortType,$=void 0===y?"name":y,b=p.page,E=void 0===b?1:b,w=p.pageSize,_=void 0===w?7:w,P=p.house,S=void 0===P?"gryffindor":P,C=f.isReady,N=(0,h.useCallback)(function(){c(!0),O.get("/api/hpHouses",{params:{query:null==p?void 0:p.q,termType:d,sort:v,sortType:$,page:E,pageSize:_,house:S}}).then(function(e){return n(e.data)}).catch(function(e){return i(e)}).finally(function(){return c(!1)})},[d,p,v,$,S,E,_]);return(0,h.useEffect)(function(){C&&N()},[N,C]),{Table:H()(function(){return Promise.all([r.e(79),r.e(492)]).then(r.bind(r,7492))},{ssr:!1}),isLoading:l,listData:t,error:!!o,onPageChange:function(e){var t=e.selected;return f.push({query:L(L({},f.query),{},{page:t+1})})},isReady:C}},D=r(5675),q=r.n(D),x={name:{value:"Name",isSortable:!0},alternate_names:{value:"Alternative names"},species:{value:"Species"},gender:{value:"Gender"},dateOfBirth:{value:"Date of Birth",isSortable:!0},patronus:{value:"Patronus"},alive:{value:"Alive",formatter:function(e){return e.item.alive?h.createElement(q(),{src:"/true-icon.svg",width:"12",height:"12",alt:"True icon"}):h.createElement(q(),{src:"/false-icon.svg",width:"12",height:"12",alt:"False icon"})}}},M=r(729),W=r.n(M);function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach(function(t){j(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F=[{id:1,house:"Gryffindor",color:"red"},{id:2,house:"Ravenclaw",color:"blue"},{id:3,house:"Hufflepuff",color:"yellow"},{id:4,house:"Slytherin",color:"green"}],z=function(){var e,t=(0,u.useRouter)(),r=t.query.house||"Gryffindor",n=F.filter(function(e){return e.house!==r});return{selectedHouseColor:(null===(e=F.find(function(e){return e.house===r}))||void 0===e?void 0:e.color)||"red",selectedHouse:r,filteredHouses:n,onSelectHouse:function(e){var r=e.house;return t.push({query:R(R({},t.query),{},{house:r,page:1})})}}},X=function(){var e=z(),t=e.selectedHouseColor,r=e.selectedHouse,n=e.filteredHouses,a=e.onSelectHouse;return h.createElement("div",{className:W().housesWrapper},h.createElement(_,{selectedOption:r,customClass:v()(W().selectedHouse,W()[t])},n.map(function(e){var t=e.id,r=e.house,n=e.color;return h.createElement("button",{key:t,className:v()(W().houseButton,W()[n]),onClick:function(){return a({house:r})}},r)})))},G=r(1358),V=r.n(G),J=r(6247),U=r.n(J);function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var K=function(e){var t,r=e.total,n=e.range,a=e.onPageChange,o=function(e){if(Array.isArray(e))return e}(t=(0,h.useState)(1))||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,u=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(s){u=!0,n=s}finally{try{i||null==a.return||a.return()}finally{if(u)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=o[0],s=o[1],l=(0,u.useRouter)().query.page;return(0,h.useEffect)(function(){l&&s(Number(l))},[l]),h.createElement(V(),{nextLabel:">",previousLabel:"<",forcePage:i-1,onPageChange:a,pageRangeDisplayed:1,pageCount:Math.ceil(r/n),containerClassName:U().paginationWrapper,pageClassName:U().paginationItem,previousClassName:U().paginationItem,nextClassName:U().paginationItem,previousLinkClassName:U().paginationLinkItem,nextLinkClassName:U().paginationLinkItem,pageLinkClassName:U().paginationLinkItem,activeLinkClassName:U().activeItem,disabledLinkClassName:U().disabled})},Z=function(){var e,t,r=A(),n=r.Table,a=r.isLoading,o=r.listData,u=r.error,s=r.onPageChange;return r.isReady,h.createElement(h.Fragment,null,h.createElement("div",{className:i().container},h.createElement("div",{className:i().containerGrid},h.createElement("div",{className:i().header},h.createElement("div",{className:i().logo},h.createElement("div",{className:i().title},h.createElement(q(),{src:"/glasses.svg",width:"35",height:"17",alt:"Harry's glasses"}),"Harry Potter"),h.createElement("p",null,"houses \xa0list",h.createElement("img",{src:"/lightning.svg",width:"18",height:"18",alt:"Lightning"}))),h.createElement("div",{className:i().search},h.createElement(P,null)),h.createElement("div",{className:i().divider}),h.createElement("div",{className:i().house},h.createElement(X,null))),a?h.createElement("div",{className:i().loaderWrapper},h.createElement("div",{className:i().loader})):u?h.createElement("div",{className:i().badServer},h.createElement(q(),{src:"/error-icon.svg",width:"200",height:"50",alt:"Internal Server Error"}),h.createElement("h4",null,"Oops! An error has occurred."),h.createElement("p",null,"Hang in there! We're working to fix the issues.")):h.createElement("div",{className:i().list},h.createElement(n,{categories:x,list:null!==(e=o.data)&&void 0!==e?e:[],customClass:i().tableColumnsWidth})))),h.createElement(K,{total:null===(t=o.totalCount)||void 0===t?void 0:t.length,range:7,onPageChange:s}))},Q=function(){return h.createElement(h.Fragment,null,h.createElement(a(),null,h.createElement("title",null,"Harry Potter Houses - Patr\xedcia Carvalho"),h.createElement("meta",{name:"description",content:"Harry Potter Houses - Patr\xedcia Carvalho"}),h.createElement("link",{rel:"icon",href:"/glasses.svg"})),h.createElement(Z,null))}},8312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(406)}])},729:function(e){e.exports={housesWrapper:"Houses_housesWrapper__Y4LOa",selectedHouse:"Houses_selectedHouse__tnHkm",houseButton:"Houses_houseButton__nBeEc",red:"Houses_red__SbHN_",yellow:"Houses_yellow__T0c9P",blue:"Houses_blue__0ywCA",green:"Houses_green__5LJt1"}},4603:function(e){e.exports={container:"HousesList_container__l5YXm",containerGrid:"HousesList_containerGrid__otXJo",header:"HousesList_header__y2Yuq",logo:"HousesList_logo__gJLFd",title:"HousesList_title__X7gue",divider:"HousesList_divider__cNJFE",house:"HousesList_house__sbaUk",search:"HousesList_search__oj_cu",list:"HousesList_list__PHU8O",badServer:"HousesList_badServer__N_FzX",loaderWrapper:"HousesList_loaderWrapper__5om0T",loader:"HousesList_loader__qM1Ni",spin:"HousesList_spin__8blH_",tableColumnsWidth:"HousesList_tableColumnsWidth__WVa_6"}},9503:function(e){e.exports={button:"MenuDropdown_button__wa8rR",menuOptions:"MenuDropdown_menuOptions__Y9j7z",showMenu:"MenuDropdown_showMenu__fzA9V"}},6247:function(e){e.exports={paginationWrapper:"Pagination_paginationWrapper__HPjvl",paginationItem:"Pagination_paginationItem__tywzb",paginationLinkItem:"Pagination_paginationLinkItem__kXSAH",activeItem:"Pagination_activeItem__J4ejK",disabled:"Pagination_disabled__JaXNA"}},3678:function(e){e.exports={searchBar:"SearchBar_searchBar__1W25z",termType:"SearchBar_termType__p2hf1",selectedOption:"SearchBar_selectedOption__gMFzy",typeOption:"SearchBar_typeOption__YGLTq"}}},function(e){e.O(0,[384,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);